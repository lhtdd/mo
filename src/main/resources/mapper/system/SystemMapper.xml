<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="system">
	<!-- 查询当前用户 -->
	<select id="selectUserByName" parameterType="String" resultType="CurrentUser">
	    select 
		 c.id as id,
		 c.userImage as userImage,
		 c.username as username,
		 c.password as password,
		 c.alias as alias,
		 d.sex as sex,
		 c.type as type	    
	    from t_cusomer as c 
	    left join t_customer_detail as d 
	    on c.id = d.id 
	    where c.username = #{username}
	</select>
	<!-- 新增用户 -->
	<insert id="insertIntoCustomer" parameterType="RegisterInfo">
		insert into
		t_customer(id,username,password,registerType,status,validCode,intime)
		values(#{id},#{username},#{password},#{registerType},#{status},#{validCode},#{intime})
	</insert>
	<insert id="insertIntoCustomerDetail" parameterType="RegisterInfo">
		insert into
		t_customer_detail(id,sex,updateTime)
		values(#{id},#{sex},#{updateTime})
	</insert>
</mapper>