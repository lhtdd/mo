<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="notepad">
	<!-- 开启二级缓存 各属性默认-->
	<cache></cache>

	<select id="getNotepads" parameterType="String" resultType="t_notepad">
		select * from t_notepad where customerid = #{customerID} order by inTime desc
	</select>
	
	<select id="getTopsNotepad" parameterType="String" resultType="t_notepad">
		select * from t_notepad where customerid = #{customerID} and isTop = 1
	</select>
	
	<select id="getNotepadById" parameterType="String" resultType="t_notepad">
		select * from t_notepad where id = #{id}
	</select>

	<insert id="addNotepad" parameterType="t_notepad">
		insert into t_notepad(customerid,notepadName,type,content,sort,isTop,inTime,remark)
		values(
		#{customerid},
		#{notepadName},
		#{type},
		#{content},
		max(sort)+1,
		#{isTop},
		#{inTime},
		#{remark})
	</insert>
	
	<update id="updateNotepadName" parameterType="Map">
		update t_notepad set notepadName = #{notepadName} , updateTime = now() where id = #{id}
	</update>

	<update id="updateTopsOfNotepad" parameterType="String">
		update t_notepad set isTop = 1 , updateTime = now() where id = #{id}
	</update>

	<update id="updateNoneTopsOfNotepad" parameterType="String">
		update t_notepad set isTop = 0 , updateTime = now() where customerid = #{customerID} and isTop = 1
	</update>

	<update id="updateNotepadContent" parameterType="Map">
		update t_notepad set content = #{content} , updateTime = now() where id = #{id}
	</update>
	
	<delete id="deleteNotepad" parameterType="String">
		delete from t_notepad
		<where>
		 	id = #{id}
		</where>
	</delete>
	
</mapper>